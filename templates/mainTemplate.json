{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "location": {
      "type": "string",
      "defaultValue": "[resourceGroup().location]",
      "metadata": {
        "description": "Location for all resources."
      }
    },
    "pricingTier": {
      "type": "string",
      "defaultValue": "PerGB2018",
      "allowedValues": [
        "CapacityReservation",
        "Free",
        "LACluster",
        "PerGB2018",
        "PerNode",
        "Premium",
        "Standalone",
        "Standard"
      ],
      "metadata": {
        "description": "Pricing tier for the Log Analytics workspace."
      }
    },
    "retentionInDays": {
      "type": "int",
      "defaultValue": 30,
      "minValue": 7,
      "maxValue": 730,
      "metadata": {
        "description": "Number of days to retain logs."
      }
    },
    "enableDataConnectors": {
      "type": "array",
      "defaultValue": [],
      "allowedValues": [
        "AzureActivityLog",
        "SecurityInsightsSecurityEventCollectionConfiguration",
        "WindowsFirewall",
        "DnsAnalytics"
      ],
      "metadata": {
        "description": "Select one or more data connectors to enable."
      }
    },
    "enableSolutions1P": {
      "type": "array",
      "defaultValue": [],
      "allowedValues": [
        "MicrosoftThreatProtection",
        "MicrosoftCloudAppSecurity",
        "MicrosoftDefenderForIdentity"
      ],
      "metadata": {
        "description": "First-party Microsoft solutions for Content Hub."
      }
    },
    "enableSolutionsEssentials": {
      "type": "array",
      "defaultValue": [],
      "allowedValues": [
        "EssentialsNetwork",
        "EssentialsIdentity",
        "EssentialsData"
      ],
      "metadata": {
        "description": "Essential solution bundles for quick start."
      }
    },
    "enableSolutionsTraining": {
      "type": "array",
      "defaultValue": [],
      "allowedValues": [
        "TrainingSimulatedThreats",
        "TrainingHoneypots"
      ],
      "metadata": {
        "description": "Simulated training environments and scenarios."
      }
    },
    "enableUEBA": {
      "type": "bool",
      "defaultValue": true,
      "metadata": {
        "description": "Enable UEBA (User and Entity Behavior Analytics)."
      }
    },
    "metadata": {
      "parameterGroups": [
        {
          "name": "Workspace Configuration",
          "parameters": [
            "location",
            "retentionInDays",
            "pricingTier"
          ]
        },
        {
          "name": "Enable Data Connectors",
          "parameters": [
            "enableDataConnectors"
          ]
        },
        {
          "name": "Enable Content Hub Solutions",
          "parameters": [
            "enableSolutions1P",
            "enableSolutionsEssentials",
            "enableSolutionsTraining"
          ]
        },
        {
          "name": "Other Options",
          "parameters": [
            "enableUEBA"
          ]
        }
      ]
    }
  },
