{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "location": {
      "type": "string",
      "defaultValue": "eastus",
      "allowedValues": [
        "eastus",
        "westus",
        "centralus",
        "westeurope",
        "northeurope",
        "southeastasia",
        "australiaeast"
      ],
      "metadata": {
        "description": "Select the Azure region for deployment."
      }
    },
    "pricingTier": {
      "type": "string",
      "defaultValue": "PerGB2018",
      "allowedValues": [
        "CapacityReservation",
        "Free",
        "LACluster",
        "PerGB2018",
        "PerNode",
        "Premium",
        "Standalone",
        "Standard"
      ],
      "metadata": {
        "description": "Pricing tier for the Log Analytics workspace."
      }
    },
    "retentionInDays": {
      "type": "int",
      "defaultValue": 30,
      "minValue": 7,
      "maxValue": 730,
      "metadata": {
        "description": "Number of days to retain logs."
      }
    },
    "enableDataConnectors": {
      "type": "array",
      "defaultValue": [],
      "allowedValues": [
        "AzureActivityLog",
        "SecurityInsightsSecurityEventCollectionConfiguration",
        "WindowsFirewall",
        "DnsAnalytics"
      ],
      "metadata": {
        "description": "Select one or more data connectors to enable."
    }
    }
  },
  "formDefinition": {
    "groups": [
      {
        "name": "workspaceConfig",
        "label": "Workspace Configuration",
        "elements": [
          {
            "name": "location",
            "type": "dropdown",
            "label": "Location",
            "toolTip": "Azure region for the resources",
            "defaultValue": "eastus"
          },
          {
            "name": "pricingTier",
            "type": "dropdown",
            "label": "Pricing Tier",
            "toolTip": "Pricing tier for the workspace",
            "defaultValue": "PerGB2018"
          },
          {
            "name": "retentionInDays",
            "type": "slider",
            "label": "Retention Days",
            "minValue": 7,
            "maxValue": 730,
            "defaultValue": 30
          }
        ]
      },
      {
        "name": "dataConnectors",
        "label": "Data Connectors",
        "elements": [
          {
            "name": "enableDataConnectors",
            "type": "checkboxList",
            "label": "Enable Data Connectors",
            "toolTip": "Select data connectors to enable",
            "options": [
              {
                "label": "Azure Activity Log",
                "value": "AzureActivityLog"
              },
              {
                "label": "Security Insights Event Collection",
                "value": "SecurityInsightsSecurityEventCollectionConfiguration"
              },
              {
                "label": "Windows Firewall",
                "value": "WindowsFirewall"
              },
              {
                "label": "DNS Analytics",
                "value": "DnsAnalytics"
              }
            ]
          }
        ]
      }
    ]
  }
}
