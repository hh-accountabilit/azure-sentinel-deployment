{
  "$schema": "https://schema.management.azure.com/schemas/deploymentTemplateUI.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "location": {
      "type": "string",
      "defaultValue": "eastus",
      "allowedValues": [
        "eastus",
        "westus",
        "centralus",
        "westeurope",
        "northeurope",
        "southeastasia",
        "australiaeast"
      ],
      "metadata": {
        "description": "Select the Azure region for deployment."
      }
    },
    "pricingTier": {
      "type": "string",
      "defaultValue": "PerGB2018",
      "allowedValues": [
        "CapacityReservation",
        "Free",
        "LACluster",
        "PerGB2018",
        "PerNode",
        "Premium",
        "Standalone",
        "Standard"
      ],
      "metadata": {
        "description": "Pricing tier for the Log Analytics workspace."
      }
    },
    "retentionInDays": {
      "type": "int",
      "defaultValue": 30,
      "minValue": 7,
      "maxValue": 730,
      "metadata": {
        "description": "Number of days to retain logs."
      }
    },
    "enableDataConnectors": {
      "type": "array",
      "defaultValue": [],
      "allowedValues": [
        "AzureActivityLog",
        "SecurityInsightsSecurityEventCollectionConfiguration",
        "WindowsFirewall",
        "DnsAnalytics"
      ],
      "metadata": {
        "description": "Select one or more data connectors to enable."
      }
    }
  },
  "formDefinition": {
    "name": "RootStep",
    "label": "Deployment Configuration",
    "elements": [
      {
        "name": "location",
        "type": "dropdown",
        "label": "Location",
        "defaultValue": "eastus",
        "toolTip": "Select the Azure region for deployment",
        "constraints": {
          "allowedValues": [
            "eastus",
            "westus",
            "centralus",
            "westeurope",
            "northeurope",
            "southeastasia",
            "australiaeast"
          ]
        }
      },
      {
        "name": "pricingTier",
        "type": "dropdown",
        "label": "Pricing Tier",
        "defaultValue": "PerGB2018",
        "toolTip": "Pricing tier for Log Analytics workspace",
        "constraints": {
          "allowedValues": [
            "CapacityReservation",
            "Free",
            "LACluster",
            "PerGB2018",
            "PerNode",
            "Premium",
            "Standalone",
            "Standard"
          ]
        }
      },
      {
        "name": "retentionInDays",
        "type": "slider",
        "label": "Retention (Days)",
        "defaultValue": 30,
        "minValue": 7,
        "maxValue": 730,
        "toolTip": "How many days to retain logs"
      },
      {
        "name": "enableDataConnectors",
        "type": "checkboxList",
        "label": "Enable Data Connectors",
        "toolTip": "Select one or more data connectors",
        "options": [
          {
            "label": "Azure Activity Log",
            "value": "AzureActivityLog"
          },
          {
            "label": "Security Insights Event Collection",
            "value": "SecurityInsightsSecurityEventCollectionConfiguration"
          },
          {
            "label": "Windows Firewall",
            "value": "WindowsFirewall"
          },
          {
            "label": "DNS Analytics",
            "value": "DnsAnalytics"
          }
        ]
      }
    ]
  }
}
